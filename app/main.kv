WindowManager:
    name: "window_manager"
    id: window_manager
    StartScreen: 
        name: "start_screen"
        id: start_screen
    SettingsScreen:
        name: "settings_screen"
        id: settings_screen
    CameraScreen:
        name: "camera_screen"
        id: camera_screen
    GalleryScreen:
        name: "gallery_screen"
        id: gallery_screen
    HoldsScreen:
        name: "holds_screen"
        id: holds_screen
    BetaScreen:
        name: "beta_screen"
        id: beta_screen
    StepsScreen:
        name: "steps_screen"
        id: steps_screen

<Button>
    size_hint: (0.7, 0.05)

<ToggleButton>
    size_hint: (0.2, 0.05)

<TextInput>
    size_hint: (0.8, 0.05)

<StartScreen>:
    FloatLayout: 
        Image:
            id: welcome_image
            source: 'assets/welcome.png'
            allow_stretch: True
        Label:
            text: "Welcome to BetaBuddy"
            font_size: '20sp'
        Button:
            text: "Capture Wall"
            pos_hint: {"x": 0.15, "top": 0.15}
            on_press:
                app.root.transition.direction = 'left'
                app.root.current = "camera_screen"
        Button:
            text: "Choose from Photos"
            pos_hint: {"x": 0.15, "top": 0.1}
            on_press:
                app.root.transition.direction = 'left'
                app.root.current = "gallery_screen"
        Button: 
            text: "Settings"
            pos_hint: {"x": 0.15, "top": 0.05}
            on_press: 
                app.root.transition.direction = 'left'
                app.root.current = "settings_screen"

<SettingsScreen>
    FloatLayout:
        TextInput:
            id: height
            hint_text: "Height (cm)"
            pos_hint: {"x": 0.1, "top": 0.35}
        TextInput:
            id: weight
            hint_text: "Weight (lbs)"
            pos_hint: {"x": 0.1, "top": 0.25}
        Button: 
            id: save
            text: "Save"
            pos_hint: {"x": 0.15, "top": 0.15}
            on_press:
                root.save()
        Button:
            id: return
            text: "Return to Main"
            pos_hint: {"x": 0.15, "top": 0.10}
            on_press:
                app.root.transition.direction = 'right'
                app.root.current = "start_screen"

<CameraScreen>:
    orientation: 'vertical'
    FloatLayout:
        Camera:
            id: camera
            resolution: (480, 640)
            play: False
        ToggleButton:
            text: 'Toggle Camera Preview'
            on_press: camera.play = not camera.play
            size_hint: (0.7, 0.05)
            pos_hint: {"x": 0.15, "top": 0.20 }
        Button:
            text: 'Capture Wall'
            pos_hint: {"x": 0.15, "top": 0.15 }
            on_press:
                root.capture()
        Button:
            text: 'Select Wall Photo'
            pos_hint: {"x": 0.15, "top": 0.10 }
            on_press:
                # root refers to <CameraScreen>
                # app refers to captureWallApp, app.root refers to the GridLayout: at the top
<<<<<<< HEAD
                app.root.transition.direction = 'left'
                app.root.current = 'gallery_screen'
=======
                camera.play = False
                app.root.ids['screen_manager'].transition.direction = 'left'
                app.root.ids['screen_manager'].current = 'holds_screen'
>>>>>>> a28ce7d09805751704b2dd5ef3fc69e9209a8d36

<GalleryScreen>:
    FloatLayout:
        Image:
            id: my_image
            source: root.manager.image_source
            size_hint: (0.8, 0.5)
            pos_hint: {"x": 0.1, "top": 0.95}
        FileChooserIconView:
            id: filechooser
            dirselect: True
            path:
                root.get_default_path()
            size_hint: (0.8, 0.2)
            pos_hint: {"x": 0.1, "top": 0.4}
            on_selection: 
                root.manager.selected(filechooser.selection)
        Button:
            id: btn
            text: "Continue to Find Beta"
            pos_hint: {"x": 0.15, "top": 0.1}
            on_press:
                app.root.transition.direction = 'left'
                app.root.current = "holds_screen"
            
<HoldsScreen>:
    FloatLayout:
        Image:
<<<<<<< HEAD
            id: img
            source: root.manager.image_source
=======
            id: welcome_image
            source: 'WallFactors/testWalls/Wall.JPEG'
            allow_stretch: False
>>>>>>> a28ce7d09805751704b2dd5ef3fc69e9209a8d36
        ToggleButton:
            id: start_toggle
            text: "Start"
            pos_hint: {"x": 0.2, "top": 1}
            on_press:
                root.toggle_start()
        ToggleButton:
            id: stop_toggle     
            text: "Stop"
            pos_hint: {"x": 0.4, "top": 1}
            on_press:
                root.toggle_stop()
        Button:        
            text: "Reset"
            size_hint: (0.2, 0.05)
            pos_hint: {"x": 0.6, "top": 1}
            on_press:
                root.reset()
        ToggleButton:
            id: add_toggle
            text: "Add"
            pos_hint: {"x": 0.2, "top": 0.95}
            on_press:
                root.toggle_add() 
        ToggleButton:
            id: delete_toggle      
            text: "Delete"
            pos_hint: {"x": 0.4, "top": 0.95}
            on_press:
                root.toggle_delete()
        Button:
            id: btn
            text: "Continue to Find Beta"
            pos_hint: {"x": 0.15, "top": 0.15}
            on_press:
                app.root.transition.direction = 'left'
                app.root.current = "beta_screen"
        Button:
            id: btn
            text: "Take another photo"
            pos_hint: {"x": 0.15, "top": 0.10}
            on_press:
                app.root.transition.direction = 'right'
                app.root.current = "camera_screen"
    
<BetaScreen>:
    FloatLayout: 
        Image:
            source: root.manager.image_source
        Label:
            text: "Beta Analysis"
            color: 1,0,0,1
        Button:
            text: "Step-by-Step Instructions"
            pos_hint: {"x": 0.15, "top": 0.15}
            on_press:
                app.root.transition.direction = 'left'
                app.root.current = "steps_screen"

        Button:
            text: "Capture Another Wall"
            pos_hint: {"x": 0.15, "top": 0.10}
            on_press:
                app.root.transition.direction = 'right'
                app.root.current = "camera_screen"

<StepsScreen>:
    FloatLayout:
        Image: 
            id: my_image
            source: root.manager.image_source
        Label:
            id: instructions
            text: "Step by Step Instructions"
            color: 1,0,0,1
        Button:
            text: "Next Step"
            size_hint: (0.3, 0.05)
            pos_hint: {"x": 0.5, "top": 0.1}
            on_press:
                root.update(1)
        Button:
            text: "Previous Step"
            size_hint: (0.3, 0.05)
            pos_hint: {"x": 0.2, "top": 0.1}
            on_press:
                root.update(-1)

